<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="controle_ja_mobile.Views.Components.DynamicToolbar">

    <Grid>
        <Grid BackgroundColor="#0F172A" Padding="25,15,25,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <VerticalStackLayout Grid.Column="0">
                <Label Text="Bem-vindo," TextColor="#94A3B8" FontSize="14"/>
                <Label x:Name="LblPageTitle" Text="Dashboard" TextColor="White" FontSize="20" FontAttributes="Bold"/>
            </VerticalStackLayout>

            <HorizontalStackLayout Grid.Column="1" Spacing="15">
                <Border StrokeThickness="0" BackgroundColor="#1E293B" HeightRequest="40" WidthRequest="40" StrokeShape="RoundRectangle 20">
                    <Grid>
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnMenuTapped"/>
                        </Grid.GestureRecognizers>

                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal">
                                    <VisualState.Setters>
                                        <Setter Property="Opacity" Value="1" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <VisualState.Setters>
                                        <Setter Property="Opacity" Value="0.5" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Path Data="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" 
                              Fill="#94A3B8" Aspect="Uniform" HeightRequest="20" WidthRequest="20" 
                              HorizontalOptions="Center" VerticalOptions="Center" InputTransparent="True"/>
                    </Grid>
                </Border>

                <Border Stroke="Transparent" HeightRequest="40" WidthRequest="40" StrokeShape="RoundRectangle 20">
                    <Image Source="logo_controle.png" Aspect="AspectFit"/>
                </Border>
            </HorizontalStackLayout>
        </Grid>

        <Grid x:Name="MenuOverlay" IsVisible="False">
            <BoxView Color="Black" Opacity="0.5" HorizontalOptions="Fill" VerticalOptions="Fill">
                <BoxView.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnOverlayTapped" />
                </BoxView.GestureRecognizers>
            </BoxView>

            <Border BackgroundColor="#334155" 
                    StrokeThickness="0" 
                    StrokeShape="RoundRectangle 10" 
                    HorizontalOptions="End" 
                    VerticalOptions="Start"
                    Margin="0, 60, 80, 0" 
                    WidthRequest="180"
                    Padding="0">

                <Border.Shadow>
                    <Shadow Brush="Black" Offset="0,4" Radius="10" Opacity="0.5"/>
                </Border.Shadow>

                <VerticalStackLayout Spacing="0">
                    <Grid Padding="15,12" BackgroundColor="Transparent">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal" />
                                <VisualState x:Name="Pressed">
                                    <VisualState.Setters>
                                        <Setter Property="BackgroundColor" Value="#475569" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnProfileTapped"/>
                        </Grid.GestureRecognizers>
                        <Label Text="Meu Perfil" TextColor="White" FontSize="14" InputTransparent="True"/>
                    </Grid>

                    <BoxView HeightRequest="1" Color="#475569" />

                    <Grid Padding="15,12" BackgroundColor="Transparent">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal" />
                                <VisualState x:Name="Pressed">
                                    <VisualState.Setters>
                                        <Setter Property="BackgroundColor" Value="#475569" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>

                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnLogoutTapped"/>
                        </Grid.GestureRecognizers>
                        <Label Text="Sair da Conta" TextColor="#EF4444" FontSize="14" FontAttributes="Bold" InputTransparent="True"/>
                    </Grid>
                </VerticalStackLayout>
            </Border>
        </Grid>
    </Grid>
</ContentView>
