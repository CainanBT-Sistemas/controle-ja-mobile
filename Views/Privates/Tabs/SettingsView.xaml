<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:controle_ja_mobile.ViewModels"
             x:Class="controle_ja_mobile.Views.Privates.Tabs.SettingsView"
             x:DataType="vm:SettingsViewModel">

    <Grid>
        <Grid BackgroundColor="#0F172A" RowDefinitions="Auto, *">

            <Grid Grid.Row="0" Padding="25,15,25,10">
                <VerticalStackLayout>
                    <Label Text="Configurações" TextColor="White" FontSize="24" FontAttributes="Bold"/>
                    <Label Text="Gerencie suas preferências" TextColor="#94A3B8" FontSize="14"/>
                </VerticalStackLayout>
            </Grid>

            <ScrollView Grid.Row="1" Padding="0,0,0,100">
                <VerticalStackLayout Spacing="20">

                    <!-- Seção de Perfil -->
                    <VerticalStackLayout Padding="25,10,25,0" Spacing="10">
                        <Label Text="PERFIL" TextColor="#94A3B8" FontSize="12" FontAttributes="Bold"/>
                        
                        <Border BackgroundColor="#1E293B" StrokeThickness="0" StrokeShape="RoundRectangle 12">
                            <VerticalStackLayout Spacing="0">
                                
                                <!-- Informações do usuário -->
                                <Grid Padding="15" ColumnDefinitions="50, *, Auto" ColumnSpacing="15">
                                    <Border Grid.Column="0" 
                                            HeightRequest="50" WidthRequest="50" 
                                            StrokeThickness="0" 
                                            BackgroundColor="{StaticResource Primary}"
                                            StrokeShape="RoundRectangle 25">
                                        <Label Text="{Binding UserName, Converter={StaticResource FirstLetterConverter}}" 
                                               TextColor="#003300" 
                                               FontSize="20" 
                                               FontAttributes="Bold"
                                               HorizontalOptions="Center" 
                                               VerticalOptions="Center"/>
                                    </Border>
                                    
                                    <VerticalStackLayout Grid.Column="1" VerticalOptions="Center" Spacing="5">
                                        <Label Text="{Binding UserName}" TextColor="White" FontSize="16" FontAttributes="Bold"/>
                                        <Label Text="{Binding UserEmail}" TextColor="#94A3B8" FontSize="12"/>
                                    </VerticalStackLayout>
                                    
                                    <Path Grid.Column="2" 
                                          Data="M8.59,16.59L13.17,12L8.59,7.41L10,6l6,6l-6,6L8.59,16.59z" 
                                          Fill="#64748B" 
                                          Aspect="Uniform" 
                                          HeightRequest="20" 
                                          WidthRequest="20"
                                          VerticalOptions="Center"/>
                                </Grid>

                                <BoxView HeightRequest="1" Color="#334155" Margin="15,0"/>

                                <!-- Meu Perfil -->
                                <Grid Padding="15" BackgroundColor="Transparent">
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="Normal" />
                                            <VisualState x:Name="Pressed">
                                                <VisualState.Setters>
                                                    <Setter Property="BackgroundColor" Value="#2D3A4F" />
                                                </VisualState.Setters>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    
                                    <Grid.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding GoToProfileCommand}"/>
                                    </Grid.GestureRecognizers>
                                    
                                    <Grid ColumnDefinitions="Auto, *, Auto">
                                        <Path Grid.Column="0" 
                                              Data="M12,12c2.21,0,4-1.79,4-4s-1.79-4-4-4S8,5.79,8,8S9.79,12,12,12z M12,14c-2.67,0-8,1.34-8,4v2h16v-2C20,15.34,14.67,14,12,14z" 
                                              Fill="#94A3B8" 
                                              Aspect="Uniform" 
                                              HeightRequest="20" 
                                              WidthRequest="20"
                                              VerticalOptions="Center"/>
                                        <Label Grid.Column="1" 
                                               Text="Editar Perfil" 
                                               TextColor="White" 
                                               FontSize="14" 
                                               VerticalOptions="Center"
                                               Margin="15,0,0,0"
                                               InputTransparent="True"/>
                                        <Path Grid.Column="2" 
                                              Data="M8.59,16.59L13.17,12L8.59,7.41L10,6l6,6l-6,6L8.59,16.59z" 
                                              Fill="#64748B" 
                                              Aspect="Uniform" 
                                              HeightRequest="16" 
                                              WidthRequest="16"
                                              VerticalOptions="Center"
                                              InputTransparent="True"/>
                                    </Grid>
                                </Grid>

                            </VerticalStackLayout>
                        </Border>
                    </VerticalStackLayout>

                    <!-- Seção de Gestão -->
                    <VerticalStackLayout Padding="25,0" Spacing="10">
                        <Label Text="GESTÃO" TextColor="#94A3B8" FontSize="12" FontAttributes="Bold"/>
                        
                        <Border BackgroundColor="#1E293B" StrokeThickness="0" StrokeShape="RoundRectangle 12">
                            <VerticalStackLayout Spacing="0">
                                
                                <!-- Contas -->
                                <Grid Padding="15" BackgroundColor="Transparent">
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="Normal" />
                                            <VisualState x:Name="Pressed">
                                                <VisualState.Setters>
                                                    <Setter Property="BackgroundColor" Value="#2D3A4F" />
                                                </VisualState.Setters>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    
                                    <Grid.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding GoToAccountsCommand}"/>
                                    </Grid.GestureRecognizers>
                                    
                                    <Grid ColumnDefinitions="Auto, *, Auto">
                                        <Path Grid.Column="0" 
                                              Data="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z" 
                                              Fill="#94A3B8" 
                                              Aspect="Uniform" 
                                              HeightRequest="20" 
                                              WidthRequest="20"
                                              VerticalOptions="Center"/>
                                        <Label Grid.Column="1" 
                                               Text="Contas" 
                                               TextColor="White" 
                                               FontSize="14" 
                                               VerticalOptions="Center"
                                               Margin="15,0,0,0"
                                               InputTransparent="True"/>
                                        <Path Grid.Column="2" 
                                              Data="M8.59,16.59L13.17,12L8.59,7.41L10,6l6,6l-6,6L8.59,16.59z" 
                                              Fill="#64748B" 
                                              Aspect="Uniform" 
                                              HeightRequest="16" 
                                              WidthRequest="16"
                                              VerticalOptions="Center"
                                              InputTransparent="True"/>
                                    </Grid>
                                </Grid>

                                <BoxView HeightRequest="1" Color="#334155" Margin="15,0"/>

                                <!-- Categorias -->
                                <Grid Padding="15" BackgroundColor="Transparent">
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="Normal" />
                                            <VisualState x:Name="Pressed">
                                                <VisualState.Setters>
                                                    <Setter Property="BackgroundColor" Value="#2D3A4F" />
                                                </VisualState.Setters>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    
                                    <Grid.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding GoToCategoriesCommand}"/>
                                    </Grid.GestureRecognizers>
                                    
                                    <Grid ColumnDefinitions="Auto, *, Auto">
                                        <Path Grid.Column="0" 
                                              Data="M12 2l-5.5 9h11L12 2zm0 3.84L13.93 9h-3.87L12 5.84zM17.5 13c-2.49 0-4.5 2.01-4.5 4.5s2.01 4.5 4.5 4.5 4.5-2.01 4.5-4.5-2.01-4.5-4.5-4.5zm0 7c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5zM3 21.5h8v-8H3v8zm2-6h4v4H5v-4z" 
                                              Fill="#94A3B8" 
                                              Aspect="Uniform" 
                                              HeightRequest="20" 
                                              WidthRequest="20"
                                              VerticalOptions="Center"/>
                                        <Label Grid.Column="1" 
                                               Text="Categorias" 
                                               TextColor="White" 
                                               FontSize="14" 
                                               VerticalOptions="Center"
                                               Margin="15,0,0,0"
                                               InputTransparent="True"/>
                                        <Path Grid.Column="2" 
                                              Data="M8.59,16.59L13.17,12L8.59,7.41L10,6l6,6l-6,6L8.59,16.59z" 
                                              Fill="#64748B" 
                                              Aspect="Uniform" 
                                              HeightRequest="16" 
                                              WidthRequest="16"
                                              VerticalOptions="Center"
                                              InputTransparent="True"/>
                                    </Grid>
                                </Grid>

                                <BoxView HeightRequest="1" Color="#334155" Margin="15,0"/>

                                <!-- Cartões de Crédito -->
                                <Grid Padding="15" BackgroundColor="Transparent">
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="Normal" />
                                            <VisualState x:Name="Pressed">
                                                <VisualState.Setters>
                                                    <Setter Property="BackgroundColor" Value="#2D3A4F" />
                                                </VisualState.Setters>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    
                                    <Grid.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding GoToCreditCardsCommand}"/>
                                    </Grid.GestureRecognizers>
                                    
                                    <Grid ColumnDefinitions="Auto, *, Auto">
                                        <Path Grid.Column="0" 
                                              Data="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z" 
                                              Fill="#94A3B8" 
                                              Aspect="Uniform" 
                                              HeightRequest="20" 
                                              WidthRequest="20"
                                              VerticalOptions="Center"/>
                                        <Label Grid.Column="1" 
                                               Text="Cartões de Crédito" 
                                               TextColor="White" 
                                               FontSize="14" 
                                               VerticalOptions="Center"
                                               Margin="15,0,0,0"
                                               InputTransparent="True"/>
                                        <Path Grid.Column="2" 
                                              Data="M8.59,16.59L13.17,12L8.59,7.41L10,6l6,6l-6,6L8.59,16.59z" 
                                              Fill="#64748B" 
                                              Aspect="Uniform" 
                                              HeightRequest="16" 
                                              WidthRequest="16"
                                              VerticalOptions="Center"
                                              InputTransparent="True"/>
                                    </Grid>
                                </Grid>

                                <BoxView HeightRequest="1" Color="#334155" Margin="15,0"/>

                                <!-- Veículos -->
                                <Grid Padding="15" BackgroundColor="Transparent">
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="Normal" />
                                            <VisualState x:Name="Pressed">
                                                <VisualState.Setters>
                                                    <Setter Property="BackgroundColor" Value="#2D3A4F" />
                                                </VisualState.Setters>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    
                                    <Grid.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding GoToVehiclesCommand}"/>
                                    </Grid.GestureRecognizers>
                                    
                                    <Grid ColumnDefinitions="Auto, *, Auto">
                                        <Path Grid.Column="0" 
                                              Data="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" 
                                              Fill="#94A3B8" 
                                              Aspect="Uniform" 
                                              HeightRequest="20" 
                                              WidthRequest="20"
                                              VerticalOptions="Center"/>
                                        <Label Grid.Column="1" 
                                               Text="Veículos" 
                                               TextColor="White" 
                                               FontSize="14" 
                                               VerticalOptions="Center"
                                               Margin="15,0,0,0"
                                               InputTransparent="True"/>
                                        <Path Grid.Column="2" 
                                              Data="M8.59,16.59L13.17,12L8.59,7.41L10,6l6,6l-6,6L8.59,16.59z" 
                                              Fill="#64748B" 
                                              Aspect="Uniform" 
                                              HeightRequest="16" 
                                              WidthRequest="16"
                                              VerticalOptions="Center"
                                              InputTransparent="True"/>
                                    </Grid>
                                </Grid>

                            </VerticalStackLayout>
                        </Border>
                    </VerticalStackLayout>

                    <!-- Seção de Conta -->
                    <VerticalStackLayout Padding="25,0" Spacing="10">
                        <Label Text="CONTA" TextColor="#94A3B8" FontSize="12" FontAttributes="Bold"/>
                        
                        <Border BackgroundColor="#1E293B" StrokeThickness="0" StrokeShape="RoundRectangle 12">
                            <VerticalStackLayout Spacing="0">
                                
                                <!-- Alterar Senha -->
                                <Grid Padding="15" BackgroundColor="Transparent">
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="Normal" />
                                            <VisualState x:Name="Pressed">
                                                <VisualState.Setters>
                                                    <Setter Property="BackgroundColor" Value="#2D3A4F" />
                                                </VisualState.Setters>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    
                                    <Grid.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding ChangePasswordCommand}"/>
                                    </Grid.GestureRecognizers>
                                    
                                    <Grid ColumnDefinitions="Auto, *, Auto">
                                        <Path Grid.Column="0" 
                                              Data="M18,8h-1V6c0-2.76-2.24-5-5-5S7,3.24,7,6v2H6c-1.1,0-2,0.9-2,2v10c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2V10C20,8.9,19.1,8,18,8z M12,17c-1.1,0-2-0.9-2-2s0.9-2,2-2s2,0.9,2,2S13.1,17,12,17z M15.1,8H8.9V6c0-1.71,1.39-3.1,3.1-3.1s3.1,1.39,3.1,3.1V8z" 
                                              Fill="#94A3B8" 
                                              Aspect="Uniform" 
                                              HeightRequest="20" 
                                              WidthRequest="20"
                                              VerticalOptions="Center"/>
                                        <Label Grid.Column="1" 
                                               Text="Alterar Senha" 
                                               TextColor="White" 
                                               FontSize="14" 
                                               VerticalOptions="Center"
                                               Margin="15,0,0,0"
                                               InputTransparent="True"/>
                                        <Path Grid.Column="2" 
                                              Data="M8.59,16.59L13.17,12L8.59,7.41L10,6l6,6l-6,6L8.59,16.59z" 
                                              Fill="#64748B" 
                                              Aspect="Uniform" 
                                              HeightRequest="16" 
                                              WidthRequest="16"
                                              VerticalOptions="Center"
                                              InputTransparent="True"/>
                                    </Grid>
                                </Grid>

                            </VerticalStackLayout>
                        </Border>
                    </VerticalStackLayout>

                    <!-- Seção de Sobre -->
                    <VerticalStackLayout Padding="25,0" Spacing="10">
                        <Label Text="SOBRE" TextColor="#94A3B8" FontSize="12" FontAttributes="Bold"/>
                        
                        <Border BackgroundColor="#1E293B" StrokeThickness="0" StrokeShape="RoundRectangle 12">
                            <VerticalStackLayout Spacing="0">
                                
                                <!-- Sobre o App -->
                                <Grid Padding="15" BackgroundColor="Transparent">
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="Normal" />
                                            <VisualState x:Name="Pressed">
                                                <VisualState.Setters>
                                                    <Setter Property="BackgroundColor" Value="#2D3A4F" />
                                                </VisualState.Setters>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    
                                    <Grid.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding ShowAboutCommand}"/>
                                    </Grid.GestureRecognizers>
                                    
                                    <Grid ColumnDefinitions="Auto, *, Auto">
                                        <Path Grid.Column="0" 
                                              Data="M11,7h2v2h-2V7z M11,11h2v6h-2V11z M12,2C6.48,2,2,6.48,2,12s4.48,10,10,10s10-4.48,10-10S17.52,2,12,2z M12,20c-4.41,0-8-3.59-8-8 s3.59-8,8-8s8,3.59,8,8S16.41,20,12,20z" 
                                              Fill="#94A3B8" 
                                              Aspect="Uniform" 
                                              HeightRequest="20" 
                                              WidthRequest="20"
                                              VerticalOptions="Center"/>
                                        <Label Grid.Column="1" 
                                               Text="Sobre o Aplicativo" 
                                               TextColor="White" 
                                               FontSize="14" 
                                               VerticalOptions="Center"
                                               Margin="15,0,0,0"
                                               InputTransparent="True"/>
                                        <Label Grid.Column="2" 
                                               Text="{Binding AppVersion}" 
                                               TextColor="#64748B" 
                                               FontSize="12" 
                                               VerticalOptions="Center"
                                               InputTransparent="True"/>
                                    </Grid>
                                </Grid>

                            </VerticalStackLayout>
                        </Border>
                    </VerticalStackLayout>

                    <!-- Botão de Sair -->
                    <VerticalStackLayout Padding="25,10,25,0">
                        <Button Text="Sair da Conta" 
                                BackgroundColor="#1E293B"
                                TextColor="#EF4444" 
                                FontAttributes="Bold"
                                CornerRadius="12"
                                HeightRequest="50"
                                Command="{Binding PerformLogoutCommand}"/>
                    </VerticalStackLayout>

                </VerticalStackLayout>
            </ScrollView>
        </Grid>

        <Grid BackgroundColor="#CC000000" IsVisible="{Binding IsLoading}">
            <ActivityIndicator IsRunning="{Binding IsLoading}" Color="{StaticResource Primary}" HeightRequest="50" WidthRequest="50" VerticalOptions="Center" HorizontalOptions="Center"/>
        </Grid>

    </Grid>
</ContentView>
