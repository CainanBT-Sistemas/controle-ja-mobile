<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:controle_ja_mobile.ViewModels"
             x:Class="controle_ja_mobile.Views.Privates.Tabs.SettingsView"
             x:DataType="vm:SettingsViewModel">

    <Grid>
        <Grid BackgroundColor="#0F172A" RowDefinitions="Auto, *">

            <Grid Grid.Row="0" Padding="25,15,25,10">
                <VerticalStackLayout>
                    <Label Text="Configurações" TextColor="White" FontSize="24" FontAttributes="Bold"/>
                    <Label Text="Gerencie suas preferências" TextColor="#94A3B8" FontSize="14"/>
                </VerticalStackLayout>
            </Grid>

            <ScrollView Grid.Row="1" Padding="0,0,0,100">
                <VerticalStackLayout Spacing="20">

                    <!-- Seção de Perfil -->
                    <VerticalStackLayout Padding="25,10,25,0" Spacing="10">
                        <Label Text="PERFIL" TextColor="#94A3B8" FontSize="12" FontAttributes="Bold"/>
                        
                        <Border BackgroundColor="#1E293B" StrokeThickness="0" StrokeShape="RoundRectangle 12">
                            <VerticalStackLayout Spacing="0">
                                
                                <!-- Informações do usuário -->
                                <Grid Padding="15" ColumnDefinitions="50, *, Auto" RowSpacing="5">
                                    <Border Grid.Column="0" Grid.RowSpan="2" 
                                            HeightRequest="50" WidthRequest="50" 
                                            StrokeThickness="0" 
                                            BackgroundColor="{StaticResource Primary}"
                                            StrokeShape="RoundRectangle 25">
                                        <Label Text="{Binding UserName, StringFormat='{0:0}'}" 
                                               TextColor="#003300" 
                                               FontSize="20" 
                                               FontAttributes="Bold"
                                               HorizontalOptions="Center" 
                                               VerticalOptions="Center"/>
                                    </Border>
                                    
                                    <VerticalStackLayout Grid.Column="1" VerticalOptions="Center" Spacing="2">
                                        <Label Text="{Binding UserName}" TextColor="White" FontSize="16" FontAttributes="Bold"/>
                                        <Label Text="{Binding UserEmail}" TextColor="#94A3B8" FontSize="12"/>
                                    </VerticalStackLayout>
                                    
                                    <Path Grid.Column="2" 
                                          Data="M8.59,16.59L13.17,12L8.59,7.41L10,6l6,6l-6,6L8.59,16.59z" 
                                          Fill="#64748B" 
                                          Aspect="Uniform" 
                                          HeightRequest="20" 
                                          WidthRequest="20"
                                          VerticalOptions="Center"/>
                                </Grid>

                                <BoxView HeightRequest="1" Color="#334155" Margin="15,0"/>

                                <!-- Meu Perfil -->
                                <Grid Padding="15" BackgroundColor="Transparent">
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="Normal" />
                                            <VisualState x:Name="Pressed">
                                                <VisualState.Setters>
                                                    <Setter Property="BackgroundColor" Value="#2D3A4F" />
                                                </VisualState.Setters>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    
                                    <Grid.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding GoToProfileCommand}"/>
                                    </Grid.GestureRecognizers>
                                    
                                    <Grid ColumnDefinitions="Auto, *, Auto">
                                        <Path Grid.Column="0" 
                                              Data="M12,12c2.21,0,4-1.79,4-4s-1.79-4-4-4S8,5.79,8,8S9.79,12,12,12z M12,14c-2.67,0-8,1.34-8,4v2h16v-2C20,15.34,14.67,14,12,14z" 
                                              Fill="#94A3B8" 
                                              Aspect="Uniform" 
                                              HeightRequest="20" 
                                              WidthRequest="20"
                                              VerticalOptions="Center"/>
                                        <Label Grid.Column="1" 
                                               Text="Editar Perfil" 
                                               TextColor="White" 
                                               FontSize="14" 
                                               VerticalOptions="Center"
                                               Margin="15,0,0,0"
                                               InputTransparent="True"/>
                                        <Path Grid.Column="2" 
                                              Data="M8.59,16.59L13.17,12L8.59,7.41L10,6l6,6l-6,6L8.59,16.59z" 
                                              Fill="#64748B" 
                                              Aspect="Uniform" 
                                              HeightRequest="16" 
                                              WidthRequest="16"
                                              VerticalOptions="Center"
                                              InputTransparent="True"/>
                                    </Grid>
                                </Grid>

                            </VerticalStackLayout>
                        </Border>
                    </VerticalStackLayout>

                    <!-- Seção de Conta -->
                    <VerticalStackLayout Padding="25,0" Spacing="10">
                        <Label Text="CONTA" TextColor="#94A3B8" FontSize="12" FontAttributes="Bold"/>
                        
                        <Border BackgroundColor="#1E293B" StrokeThickness="0" StrokeShape="RoundRectangle 12">
                            <VerticalStackLayout Spacing="0">
                                
                                <!-- Alterar Senha -->
                                <Grid Padding="15" BackgroundColor="Transparent">
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="Normal" />
                                            <VisualState x:Name="Pressed">
                                                <VisualState.Setters>
                                                    <Setter Property="BackgroundColor" Value="#2D3A4F" />
                                                </VisualState.Setters>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    
                                    <Grid.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding ChangePasswordCommand}"/>
                                    </Grid.GestureRecognizers>
                                    
                                    <Grid ColumnDefinitions="Auto, *, Auto">
                                        <Path Grid.Column="0" 
                                              Data="M18,8h-1V6c0-2.76-2.24-5-5-5S7,3.24,7,6v2H6c-1.1,0-2,0.9-2,2v10c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2V10C20,8.9,19.1,8,18,8z M12,17c-1.1,0-2-0.9-2-2s0.9-2,2-2s2,0.9,2,2S13.1,17,12,17z M15.1,8H8.9V6c0-1.71,1.39-3.1,3.1-3.1s3.1,1.39,3.1,3.1V8z" 
                                              Fill="#94A3B8" 
                                              Aspect="Uniform" 
                                              HeightRequest="20" 
                                              WidthRequest="20"
                                              VerticalOptions="Center"/>
                                        <Label Grid.Column="1" 
                                               Text="Alterar Senha" 
                                               TextColor="White" 
                                               FontSize="14" 
                                               VerticalOptions="Center"
                                               Margin="15,0,0,0"
                                               InputTransparent="True"/>
                                        <Path Grid.Column="2" 
                                              Data="M8.59,16.59L13.17,12L8.59,7.41L10,6l6,6l-6,6L8.59,16.59z" 
                                              Fill="#64748B" 
                                              Aspect="Uniform" 
                                              HeightRequest="16" 
                                              WidthRequest="16"
                                              VerticalOptions="Center"
                                              InputTransparent="True"/>
                                    </Grid>
                                </Grid>

                            </VerticalStackLayout>
                        </Border>
                    </VerticalStackLayout>

                    <!-- Seção de Sobre -->
                    <VerticalStackLayout Padding="25,0" Spacing="10">
                        <Label Text="SOBRE" TextColor="#94A3B8" FontSize="12" FontAttributes="Bold"/>
                        
                        <Border BackgroundColor="#1E293B" StrokeThickness="0" StrokeShape="RoundRectangle 12">
                            <VerticalStackLayout Spacing="0">
                                
                                <!-- Sobre o App -->
                                <Grid Padding="15" BackgroundColor="Transparent">
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="Normal" />
                                            <VisualState x:Name="Pressed">
                                                <VisualState.Setters>
                                                    <Setter Property="BackgroundColor" Value="#2D3A4F" />
                                                </VisualState.Setters>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                    
                                    <Grid.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding ShowAboutCommand}"/>
                                    </Grid.GestureRecognizers>
                                    
                                    <Grid ColumnDefinitions="Auto, *, Auto">
                                        <Path Grid.Column="0" 
                                              Data="M11,7h2v2h-2V7z M11,11h2v6h-2V11z M12,2C6.48,2,2,6.48,2,12s4.48,10,10,10s10-4.48,10-10S17.52,2,12,2z M12,20c-4.41,0-8-3.59-8-8 s3.59-8,8-8s8,3.59,8,8S16.41,20,12,20z" 
                                              Fill="#94A3B8" 
                                              Aspect="Uniform" 
                                              HeightRequest="20" 
                                              WidthRequest="20"
                                              VerticalOptions="Center"/>
                                        <Label Grid.Column="1" 
                                               Text="Sobre o Aplicativo" 
                                               TextColor="White" 
                                               FontSize="14" 
                                               VerticalOptions="Center"
                                               Margin="15,0,0,0"
                                               InputTransparent="True"/>
                                        <Label Grid.Column="2" 
                                               Text="{Binding AppVersion}" 
                                               TextColor="#64748B" 
                                               FontSize="12" 
                                               VerticalOptions="Center"
                                               InputTransparent="True"/>
                                    </Grid>
                                </Grid>

                            </VerticalStackLayout>
                        </Border>
                    </VerticalStackLayout>

                    <!-- Botão de Sair -->
                    <VerticalStackLayout Padding="25,10,25,0">
                        <Button Text="Sair da Conta" 
                                BackgroundColor="#1E293B"
                                TextColor="#EF4444" 
                                FontAttributes="Bold"
                                CornerRadius="12"
                                HeightRequest="50"
                                Command="{Binding PerformLogoutCommand}"/>
                    </VerticalStackLayout>

                </VerticalStackLayout>
            </ScrollView>
        </Grid>

        <Grid BackgroundColor="#CC000000" IsVisible="{Binding IsLoading}">
            <ActivityIndicator IsRunning="{Binding IsLoading}" Color="{StaticResource Primary}" HeightRequest="50" WidthRequest="50" VerticalOptions="Center" HorizontalOptions="Center"/>
        </Grid>

    </Grid>
</ContentView>
